-*-mode:org-*-
+STARTUP: showall
+STARTUP: hidestars

* MU HowTo / FAQ

This document contains some notes on using 'mu'. 'mu' is collection of
utilities to deal with Maildirs, in particular indexing and
searching. Maildirs are a way to store your e-mail on disk, mostly in use on
Unix/Linux system. This document is for users of 'mu'. I assume a basic
knowledge of using the command line on your Unix system. Mu is licensed under
the terms of the GNU General Public License[1] version 3 or later.

** What does mu do?

Mu's main purpose in life is to make make indexing and searching Maildirs
easy. That is, if you want to find that message about pottery that Jane sent
you some years ago, mu can help. Mu can work in tandem with your existing
e-mail program.

** Who should use mu?

Mu is for users of Maildir-using e-mail programs.

Quite some programs support Maildir, for example Thunderbird, Evolution, Mutt,
KMail, and Modest, although they might not use it by default. 

If your e-mail program uses 'mbox' instead (another popular format), you can
convert them to Maildir with one of the many tools to do that,
i.e. 'mbox2maildir'[2]. Obviously, unless you move to Maildir as your primary
format, you'd have do the conversion quite often to keep up-to-date.

[ If you have *no* idea what I am talking about in the previous, 'mu' is
probably not for you. Not yet, at least... ]


** How do I index my mail?

Ok, you have installed mu; now what?

To be able to search your messages, you first need to index your existing
messages:
  $ mu-index ~/MyMaildir
(where 'MyMaildir' is your maildir; the default is $MAILDIR, ~/Maildir).

This might take considerable time, depending on the number of email messages
you have. On my old machine, about 60 messages per seconds are scanned for mu
version 0.2 -- future versions may be faster (as an illustration, mu 0.2 is
about 2.5 - 3 times faster than verion 0.1), and mu 0.3 is still faster, up to
about 50% on ext3 file systems with dir_index enabled.

As the indexing takes place, some progress indication should be shown, unless
you provided the '--quiet' parameter.

After mu-index has finished, your databases (~/.mu/mu-sqlite-db-0.3) should be
filled with information about your messages. You can check with the sqlite3
command line tool, or use a graphical tool like SQLite Manager[3].

In addition, there should be a Xapian database (~/.mu/mu-xapian.db-0.3/) with
information about the message contents.

Any logging information will be stored in ~/.mu/mu-index.log

** How do I search my mail?

Indexing may take a while, but searching is very fast.

Assuming you succesfully indexed your mail, we can search now for specific
messages. The mu-find manpage has much more information about this. But, say
we want to get all messages with subject 'jazz' from 'bob':
	
  $ mu-find s:jazz f:bob
  Mon May  2 11:16:15 2005,"Bob B" <cyberbob@cuux.net>,jazz is boring
  Mon Dec 31 10:59:21 2007,bob@foo.bar <bob@hdbngr.de>,Jazz
  Wed Mar 12 11:14:50 2008,Cyberbob <cyb@coolsheep.foo>, give me jazz

the 's:jazz' gives us all the messages about Jazz, the 'f:bob' adds the
additional condition that it must be from Bob. Again, much more information is
in the manpage. But one very useful feature is to output a maildir with
symbolic links to the matched messages:

  $ mu-find --output=links --linkdir=jazzbob s:jazz f:bob

after that you can run e.g. mutt:

  $ mutt -f jazzbob

and you can read those messages. Some handy macro:

macro index <F8> "<shell-escape>rm -rf ~/.mumatch; mu-find -o l -l ~/.mumatch " "mu-find"
macro index <F9> "<change-folder-readonly>~/.mumatch\n" "display mu-find results"

Now, F8 will start a search, and F9 will show the results.

** But I want to search body contents; how?

Starting with version 0.2, it is possible to search the body contents using
the 'x:' search option. For example:

  $ mu-find f:bill@example.com 'x:beer OR wine OR milk'

will get you all mails from Bill about either beer, wine or milk. See the
mu-find manpage for more discussion.


Footnotes: 
[1]  http://www.gnu.org/licenses/gpl-3.0.html
[2]  https://addons.mozilla.org/en-US/firefox/addon/5817
[3]  http://fetchmail.berlios.de/
[4]  http://software.complete.org/software/projects/show/offlineimap
[5]  http://untroubled.org/mbox2maildir

